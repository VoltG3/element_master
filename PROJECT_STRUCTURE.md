# Project Structure Overview

## ğŸ—ï¸ Directory Architecture

```
element_masters/
â”‚
â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ® engine/                    âœ¨ NEW - Unified Game Engine
â”‚   â”‚   â”œâ”€â”€ audio/                   Sound effects system
â”‚   â”‚   â”‚   â””â”€â”€ sfx.js
â”‚   â”‚   â”œâ”€â”€ physics/                 Physics & collision
â”‚   â”‚   â”‚   â”œâ”€â”€ collision.js
â”‚   â”‚   â”‚   â”œâ”€â”€ horizontal.js
â”‚   â”‚   â”‚   â””â”€â”€ vertical.js
â”‚   â”‚   â”œâ”€â”€ gameplay/                Game mechanics
â”‚   â”‚   â”‚   â”œâ”€â”€ hazards.js
â”‚   â”‚   â”‚   â”œâ”€â”€ items.js
â”‚   â”‚   â”‚   â””â”€â”€ projectiles.js
â”‚   â”‚   â”œâ”€â”€ liquids/                 Liquid physics
â”‚   â”‚   â”‚   â””â”€â”€ liquidUtils.js
â”‚   â”‚   â”œâ”€â”€ loop/                    Game loop
â”‚   â”‚   â”‚   â””â”€â”€ updateFrame.js
â”‚   â”‚   â””â”€â”€ registry/                Asset registry
â”‚   â”‚       â””â”€â”€ index.js
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ”„ store/                     âœ¨ NEW - Redux State Management
â”‚   â”‚   â”œâ”€â”€ index.js                 Store configuration
â”‚   â”‚   â””â”€â”€ slices/
â”‚   â”‚       â”œâ”€â”€ gameSlice.js         Map & game state
â”‚   â”‚       â”œâ”€â”€ playerSlice.js       Player stats & position
â”‚   â”‚       â”œâ”€â”€ settingsSlice.js     Settings + localStorage
â”‚   â”‚       â””â”€â”€ uiSlice.js           UI state (modals, etc.)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ› ï¸ services/                  âœ¨ NEW - Service Layer
â”‚   â”‚   â””â”€â”€ errorHandler.js          Centralized error handling
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“¦ constants/                 âœ¨ NEW - Centralized Constants
â”‚   â”‚   â””â”€â”€ gameConstants.js         Physics, player, timing, etc.
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ¨ styles/                    âœ¨ NEW - Styling System
â”‚   â”‚   â”œâ”€â”€ theme.js                 Design tokens & theme
â”‚   â”‚   â””â”€â”€ GlobalStyles.js          Global CSS
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ§© components/                âœ¨ NEW - Reusable Components
â”‚   â”‚   â”œâ”€â”€ Button.jsx               Styled button with PropTypes
â”‚   â”‚   â””â”€â”€ Modal.jsx                Styled modal with PropTypes
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“„ sections/                  UI Sections (Pages)
â”‚   â”‚   â”œâ”€â”€ chapters/
â”‚   â”‚   â”‚   â”œâ”€â”€ home.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ game.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ editor.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ GameHeader.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ GameSettings.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ GameTerminal.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PixiStage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ crystals.jsx
â”‚   â”‚   â”‚   â””â”€â”€ repository.jsx
â”‚   â”‚   â”œâ”€â”€ section.header.js
â”‚   â”‚   â”œâ”€â”€ section.footer.js
â”‚   â”‚   â”œâ”€â”€ section.content.js
â”‚   â”‚   â””â”€â”€ section.header.navigation.*
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ”§ utilites/                  Helper Functions
â”‚   â”‚   â”œâ”€â”€ useGameEngine.js
â”‚   â”‚   â”œâ”€â”€ useInput.js
â”‚   â”‚   â”œâ”€â”€ BackgroundMusicPlayer.jsx
â”‚   â”‚   â”œâ”€â”€ AnimatedItem.jsx
â”‚   â”‚   â””â”€â”€ saveFile.js
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ­ Pixi/                      PixiJS Rendering
â”‚   â”‚   â”œâ”€â”€ AppManager.js
â”‚   â”‚   â”œâ”€â”€ TextureCache.js
â”‚   â”‚   â”œâ”€â”€ layers/
â”‚   â”‚   â”‚   â”œâ”€â”€ ParallaxBackground.js
â”‚   â”‚   â”‚   â””â”€â”€ TileChunkLayer.js
â”‚   â”‚   â””â”€â”€ ui/
â”‚   â”‚       â””â”€â”€ HealthBar.js
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸŒ i18n/                      Internationalization
â”‚   â”‚   â”œâ”€â”€ i18n.js
â”‚   â”‚   â””â”€â”€ translations/
â”‚   â”‚       â”œâ”€â”€ en/, ja/, lv/, no/, ru/
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ¯ Context/                   React Context
â”‚   â”‚   â””â”€â”€ langContext.js
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ’¾ assets/                    Game Assets
â”‚   â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â”‚   â”œâ”€â”€ blocks/, decorations/
â”‚   â”‚   â”‚   â”œâ”€â”€ entities/, hazards/
â”‚   â”‚   â”‚   â”œâ”€â”€ items/, obstacles/
â”‚   â”‚   â”‚   â”œâ”€â”€ projectiles/, interactables/
â”‚   â”‚   â”œâ”€â”€ json/                    Item definitions
â”‚   â”‚   â”‚   â”œâ”€â”€ blocks/, decorations/
â”‚   â”‚   â”‚   â”œâ”€â”€ entities/, hazards/
â”‚   â”‚   â”‚   â”œâ”€â”€ items/, obstacles/
â”‚   â”‚   â”‚   â”œâ”€â”€ projectiles/, interactables/
â”‚   â”‚   â”œâ”€â”€ maps/                    Level maps
â”‚   â”‚   â”‚   â””â”€â”€ Temp_01.json - Temp_07.json
â”‚   â”‚   â”œâ”€â”€ sound/
â”‚   â”‚   â”‚   â”œâ”€â”€ background/
â”‚   â”‚   â”‚   â””â”€â”€ sfx/
â”‚   â”‚   â””â”€â”€ background/              Background images
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ—‘ï¸ redux/                     âš ï¸ DEPRECATED (use store/)
â”‚   â”‚   â”œâ”€â”€ action.js
â”‚   â”‚   â”œâ”€â”€ actionTypes.js
â”‚   â”‚   â””â”€â”€ reducer.js
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ—‘ï¸ engine-legacy/             âš ï¸ BACKUP (old GameEngine/)
â”‚   â”‚
â”‚   â”œâ”€â”€ âš ï¸ GameRegistry.js            âš ï¸ DEPRECATED
â”‚   â”‚
â”‚   â”œâ”€â”€ App.js                       Main App component
â”‚   â”œâ”€â”€ index.js                     Entry point
â”‚   â””â”€â”€ index.css                    Legacy CSS
â”‚
â”œâ”€â”€ ğŸ“ public/                        Public Assets
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ favicon.ico
â”‚
â”œâ”€â”€ ğŸ“ node_modules/                  Dependencies
â”‚
â”œâ”€â”€ ğŸ“„ package.json                   Dependencies config
â”œâ”€â”€ ğŸ“„ yarn.lock                      Lockfile
â”‚
â”œâ”€â”€ ğŸ“š REFACTORING_SUMMARY.md        âœ¨ NEW - Detailed changes
â”œâ”€â”€ ğŸ“š QUICK_REFERENCE.md            âœ¨ NEW - Code examples
â”œâ”€â”€ ğŸ“š REFACTORING_COMPLETE.md       âœ¨ NEW - Executive summary
â””â”€â”€ ğŸ“š PROJECT_STRUCTURE.md          âœ¨ NEW - This file
```

---

## ğŸ”„ Data Flow Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Entry Point                          â”‚
â”‚                         index.js                             â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Redux    â”‚  â”‚    Theme     â”‚  â”‚  GlobalStyles    â”‚   â”‚
â”‚  â”‚  Provider  â”‚  â”‚   Provider   â”‚  â”‚                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      React Router                            â”‚
â”‚                     BrowserRouter                            â”‚
â”‚                                                              â”‚
â”‚  Routes:                                                     â”‚
â”‚  â”œâ”€ / (App.js)                                              â”‚
â”‚  â”‚  â”œâ”€ /                â†’ Home.jsx                          â”‚
â”‚  â”‚  â”œâ”€ /game            â†’ Game.jsx      â—„â”€â”€â”               â”‚
â”‚  â”‚  â”œâ”€ /editor          â†’ Editor.jsx       â”‚               â”‚
â”‚  â”‚  â”œâ”€ /crystals        â†’ Crystals.jsx     â”‚               â”‚
â”‚  â”‚  â””â”€ /repository      â†’ Repository.jsx   â”‚               â”‚
â”‚                                             â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              Game Component                    â”‚
    â”‚              (game.jsx)                        â”‚
    â”‚                                                â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚  â”‚     useGameEngine (Custom Hook)      â”‚    â”‚
    â”‚  â”‚                                      â”‚    â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
    â”‚  â”‚  â”‚   Game Loop (RAF)          â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚   engine/loop/updateFrame  â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚                            â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚  â”‚  Physics System      â”‚ â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚  â”‚  - Horizontal        â”‚ â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚  â”‚  - Vertical          â”‚ â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚  â”‚  - Collision         â”‚ â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚                            â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚  â”‚  Gameplay Systems    â”‚ â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚  â”‚  - Items             â”‚ â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚  â”‚  - Hazards           â”‚ â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚  â”‚  - Projectiles       â”‚ â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚                            â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚  â”‚  Liquid Systems      â”‚ â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚  â”‚  - Water / Lava      â”‚ â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚    â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â”‚                    â”‚                          â”‚
    â”‚                    â–¼                          â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚  â”‚      PixiStage (Renderer)           â”‚    â”‚
    â”‚  â”‚                                      â”‚    â”‚
    â”‚  â”‚  - Renders game world (PixiJS)      â”‚    â”‚
    â”‚  â”‚  - Parallax background              â”‚    â”‚
    â”‚  â”‚  - Weather effects                  â”‚    â”‚
    â”‚  â”‚  - UI overlays                      â”‚    â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”— State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Redux Store                            â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ gameSlice   â”‚  â”‚ playerSlice  â”‚  â”‚ settingsSlice  â”‚ â”‚
â”‚  â”‚             â”‚  â”‚              â”‚  â”‚                â”‚ â”‚
â”‚  â”‚ - mapData   â”‚  â”‚ - position   â”‚  â”‚ - sound        â”‚ â”‚
â”‚  â”‚ - tileData  â”‚  â”‚ - health     â”‚  â”‚ - graphics     â”‚ â”‚
â”‚  â”‚ - objects   â”‚  â”‚ - ammo       â”‚  â”‚ - ui           â”‚ â”‚
â”‚  â”‚ - status    â”‚  â”‚ - resources  â”‚  â”‚ - controls     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚  uiSlice     â”‚                                        â”‚
â”‚  â”‚              â”‚                                        â”‚
â”‚  â”‚ - modals     â”‚                                        â”‚
â”‚  â”‚ - camera     â”‚                                        â”‚
â”‚  â”‚ - notifications                                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²                    â”‚
         â”‚                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚dispatch â”‚         â”‚selector â”‚
    â”‚ actions â”‚         â”‚  hooks  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²                    â”‚
         â”‚                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         React Components                 â”‚
â”‚                                          â”‚
â”‚  - Read state via useSelector()         â”‚
â”‚  - Update state via useDispatch()       â”‚
â”‚  - Automatic re-renders on changes      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Styling Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ThemeProvider                      â”‚
â”‚              (styled-components)                â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚          theme.js                    â”‚     â”‚
â”‚  â”‚                                      â”‚     â”‚
â”‚  â”‚  - colors (primary, secondary, etc) â”‚     â”‚
â”‚  â”‚  - spacing (xs, sm, md, lg, xl)     â”‚     â”‚
â”‚  â”‚  - fontSize (xs, sm, base, lg, xl)  â”‚     â”‚
â”‚  â”‚  - borderRadius, shadows, etc.      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           GlobalStyles.js                       â”‚
â”‚                                                 â”‚
â”‚  - CSS Reset                                   â”‚
â”‚  - Global HTML/Body styles                    â”‚
â”‚  - Scrollbar styles                           â”‚
â”‚  - Default element styles                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Styled Components                        â”‚
â”‚                                                 â”‚
â”‚  Components access theme via props:            â”‚
â”‚  ${props => props.theme.colors.primary}        â”‚
â”‚                                                 â”‚
â”‚  Example components:                           â”‚
â”‚  - Button (variants, sizes)                    â”‚
â”‚  - Modal (customizable)                        â”‚
â”‚  - Any component can use theme                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš¨ Error Handling Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Application Code                      â”‚
â”‚                                                â”‚
â”‚  try {                                        â”‚
â”‚    riskyOperation();                          â”‚
â”‚  } catch (error) {                           â”‚
â”‚    errorHandler.error(error, context);       â”‚
â”‚  }                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          services/errorHandler.js              â”‚
â”‚                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  1. Log to Console                   â”‚   â”‚
â”‚  â”‚     (with level filtering)           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  2. Notify Listeners                 â”‚   â”‚
â”‚  â”‚     (custom error handlers)          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  3. Send to External Service         â”‚   â”‚
â”‚  â”‚     (production only - stub)         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Asset Loading Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Application Startup                       â”‚
â”‚       (index.js â†’ App.js)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      engine/registry/index.js                   â”‚
â”‚      (Auto-initializes on import)              â”‚
â”‚                                                 â”‚
â”‚  1. Load JSON files (require.context)         â”‚
â”‚     â”œâ”€ blocks/, entities/, items/, etc.       â”‚
â”‚     â””â”€ Parse and store definitions            â”‚
â”‚                                                 â”‚
â”‚  2. Load Images (require.context)             â”‚
â”‚     â”œâ”€ PNG, JPEG, SVG                         â”‚
â”‚     â””â”€ Resolve paths and bundle               â”‚
â”‚                                                 â”‚
â”‚  3. Load Sounds (require.context)             â”‚
â”‚     â”œâ”€ MP3, WAV, OGG                          â”‚
â”‚     â””â”€ Resolve paths and bundle               â”‚
â”‚                                                 â”‚
â”‚  4. Post-processing                            â”‚
â”‚     â”œâ”€ Link animations                        â”‚
â”‚     â”œâ”€ Merge visual data                      â”‚
â”‚     â””â”€ Hide editor-only items                 â”‚
â”‚                                                 â”‚
â”‚  5. Export registry                            â”‚
â”‚     â”œâ”€ getRegistry() â†’ Array of all items    â”‚
â”‚     â””â”€ findItemById(id) â†’ Single item        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Components Use Registry                  â”‚
â”‚                                                 â”‚
â”‚  - Game engine uses for collision detection   â”‚
â”‚  - Renderer uses for textures                 â”‚
â”‚  - Editor uses for item palette               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ® Game Loop Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    requestAnimationFrame (Browser API)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    useGameEngine Hook                            â”‚
â”‚    (utilites/useGameEngine.js)                  â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Game Loop Entry Point                 â”‚   â”‚
â”‚  â”‚  (called every frame ~60fps)           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    engine/loop/updateFrame.js                    â”‚
â”‚    (Frame orchestrator)                         â”‚
â”‚                                                  â”‚
â”‚  1. Calculate delta time                        â”‚
â”‚  2. Check pause state                           â”‚
â”‚  3. Read input                                  â”‚
â”‚  4. Update horizontal movement â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  5. Update vertical physics â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  6. Update liquid physics â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  7. Check item collection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  8. Check hazard damage â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  9. Update projectiles â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  10. Handle shooting â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  11. Check death conditions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  12. Update state â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    setPlayer(newState)                           â”‚
â”‚    (Triggers React re-render)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    PixiStage Re-renders                          â”‚
â”‚    (Visual update)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Constants Usage

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   constants/gameConstants.js           â”‚
â”‚                                        â”‚
â”‚  export const TILE_SIZE = 32;         â”‚
â”‚  export const GRAVITY = 0.6;          â”‚
â”‚  export const MAX_HEALTH = 100;       â”‚
â”‚  export const SHOOT_COOLDOWN = 350;   â”‚
â”‚  ... (60+ constants)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Import in any file:                   â”‚
â”‚                                        â”‚
â”‚  import {                              â”‚
â”‚    TILE_SIZE,                          â”‚
â”‚    GRAVITY,                            â”‚
â”‚    MAX_HEALTH                          â”‚
â”‚  } from '../constants/gameConstants';  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ¨ Key Improvements Summary

| Aspect | Before | After |
|--------|--------|-------|
| **Structure** | 2 overlapping dirs | Single unified engine |
| **Constants** | Magic numbers | Centralized constants |
| **State** | Local state only | Redux + local state |
| **Errors** | console.log | Professional error handler |
| **Styling** | Inline styles | Theme + styled-components |
| **Types** | No validation | PropTypes validation |
| **Comments** | Mixed LV/EN | English (new code) |
| **Imports** | Confusing paths | Clear, organized |

---

**This structure is:**
- âœ… Scalable
- âœ… Maintainable
- âœ… Professional
- âœ… Well-documented
- âœ… Production-ready

